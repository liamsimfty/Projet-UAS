<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles\\admin.css">
    <title>Admin Dashboard - Responsive watches website</title>
</head>
<body>
    <section class="container">
        <h1>Admin Dashboard</h1>
        <div id="orders-container"></div>
    </section>
    <section class="container">
        <h1>Admin Product</h1>
        <form id="product-form">
            <input type="hidden" id="product-id">
            <label for="product-title">Title:</label>
            <input type="text" id="product-title" name="product-title" required>
            <label for="product-price">Price:</label>
            <input type="number" id="product-price" name="product-price" required>
            <label for="product-image">Image URL:</label>
            <input type="text" id="product-image" name="product-image" required>
            <button type="submit">Save Product</button>
        </form>
        <div id="products-container"></div>
    </section>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (localStorage.getItem('adminLoggedIn') !== 'true') {
                window.location.href = 'admin.html';
            }
    
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const ordersContainer = document.getElementById('orders-container');
    
            if (orders.length === 0) {
                ordersContainer.innerHTML = '<p>No orders available</p>';
            } else {
                orders.forEach(order => {
                    const orderElement = document.createElement('div');
                    orderElement.innerHTML = `
                        <h3>Order ID: ${order.id}</h3>
                        <p>Customer: ${order.customer.name} (${order.customer.idCard})</p>
                        <ul>
                            ${order.items.map(item => `<li>${item.title} - $${item.price}</li>`).join('')}
                        </ul>
                        <button onclick="removeOrder(${order.id})">Cancel Order</button>
                    `;
                    ordersContainer.appendChild(orderElement);
                });
            }
        });
    
        function removeOrder(orderId) {
            let orders = JSON.parse(localStorage.getItem('orders')) || [];
            orders = orders.filter(order => order.id !== orderId);
            localStorage.setItem('orders', JSON.stringify(orders));
            window.location.reload();
        }
        document.addEventListener('DOMContentLoaded', () => {
            if (localStorage.getItem('adminLoggedIn') !== 'true') {
                window.location.href = 'admin.html';
            }

            const products = JSON.parse(localStorage.getItem('products')) || [];
            const productsContainer = document.getElementById('products-container');
            const productForm = document.getElementById('product-form');

            function renderProducts() {
                productsContainer.innerHTML = '';
                if (products.length === 0) {
                    productsContainer.innerHTML = '<p>No products available</p>';
                } else {
                    products.forEach((product, index) => {
                        const productElement = document.createElement('div');
                        productElement.innerHTML = `
                            <h3>${product.title}</h3>
                            <p>$${product.price}</p>
                            <img src="${product.image}" alt="${product.title}" style="width:100px;height:100px;">
                            <button onclick="editProduct(${index})">Edit</button>
                            <button onclick="removeProduct(${index})">Remove</button>
                        `;
                        productsContainer.appendChild(productElement);
                    });
                }
            }

            productForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const title = document.getElementById('product-title').value;
                const price = document.getElementById('product-price').value;
                const image = document.getElementById('product-image').value;
                const id = document.getElementById('product-id').value;

                if (id) {
                    products[id] = { title, price, image };
                } else {
                    products.push({ title, price, image });
                }

                localStorage.setItem('products', JSON.stringify(products));
                renderProducts();
                productForm.reset();
            });

            window.editProduct = (index) => {
                const product = products[index];
                document.getElementById('product-id').value = index;
                document.getElementById('product-title').value = product.title;
                document.getElementById('product-price').value = product.price;
                document.getElementById('product-image').value = product.image;
            };

            window.removeProduct = (index) => {
                products.splice(index, 1);
                localStorage.setItem('products', JSON.stringify(products));
                renderProducts();
            };

            renderProducts();
        });

    </script>
    
</body>
</html>
